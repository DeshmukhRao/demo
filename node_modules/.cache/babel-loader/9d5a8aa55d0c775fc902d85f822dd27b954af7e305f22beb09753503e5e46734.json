{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/* istanbul ignore file */\nconst ethers_1 = require(\"ethers\");\nconst lighthouse_config_1 = require(\"../../../lighthouse.config\");\nexports.default = async () => {\n  try {\n    //@ts-ignore\n    const provider = new ethers_1.ethers.BrowserProvider(window.ethereum);\n    const signer = await provider.getSigner();\n    const response = await fetch(`${lighthouse_config_1.lighthouseConfig.lighthouseAPI}/api/auth/get_message?publicKey=${signer.address}`);\n    const message = await response.json();\n    const signature = await signer.signMessage(message);\n    return `${signer.address}$${signature}`;\n  } catch (error) {\n    throw new Error(error.message);\n  }\n};","map":{"version":3,"names":["Object","defineProperty","exports","value","ethers_1","require","lighthouse_config_1","default","provider","ethers","BrowserProvider","window","ethereum","signer","getSigner","response","fetch","lighthouseConfig","lighthouseAPI","address","message","json","signature","signMessage","error","Error"],"sources":["D:/demo/node_modules/@lighthouse-web3/sdk/dist/Lighthouse/payPerDeal/oneTimeAuth/web.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* istanbul ignore file */\nconst ethers_1 = require(\"ethers\");\nconst lighthouse_config_1 = require(\"../../../lighthouse.config\");\nexports.default = async () => {\n    try {\n        //@ts-ignore\n        const provider = new ethers_1.ethers.BrowserProvider(window.ethereum);\n        const signer = await provider.getSigner();\n        const response = await fetch(`${lighthouse_config_1.lighthouseConfig.lighthouseAPI}/api/auth/get_message?publicKey=${signer.address}`);\n        const message = (await response.json());\n        const signature = await signer.signMessage(message);\n        return `${signer.address}$${signature}`;\n    }\n    catch (error) {\n        throw new Error(error.message);\n    }\n};\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7D;AACA,MAAMC,QAAQ,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAClC,MAAMC,mBAAmB,GAAGD,OAAO,CAAC,4BAA4B,CAAC;AACjEH,OAAO,CAACK,OAAO,GAAG,YAAY;EAC1B,IAAI;IACA;IACA,MAAMC,QAAQ,GAAG,IAAIJ,QAAQ,CAACK,MAAM,CAACC,eAAe,CAACC,MAAM,CAACC,QAAQ,CAAC;IACrE,MAAMC,MAAM,GAAG,MAAML,QAAQ,CAACM,SAAS,CAAC,CAAC;IACzC,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGV,mBAAmB,CAACW,gBAAgB,CAACC,aAAa,mCAAmCL,MAAM,CAACM,OAAO,EAAE,CAAC;IACtI,MAAMC,OAAO,GAAI,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAE;IACvC,MAAMC,SAAS,GAAG,MAAMT,MAAM,CAACU,WAAW,CAACH,OAAO,CAAC;IACnD,OAAO,GAAGP,MAAM,CAACM,OAAO,IAAIG,SAAS,EAAE;EAC3C,CAAC,CACD,OAAOE,KAAK,EAAE;IACV,MAAM,IAAIC,KAAK,CAACD,KAAK,CAACJ,OAAO,CAAC;EAClC;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}